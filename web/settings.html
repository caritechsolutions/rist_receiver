<!-- System Settings Panel - ADD THIS AFTER THE </header> TAG AND BEFORE THE MULTICAST ROUTING PANEL -->
        <div class="panel">
            <div class="panel-header">
                <h2>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/>
                        <line x1="7" y1="2" x2="7" y2="22"/>
                        <line x1="17" y1="2" x2="17" y2="22"/>
                        <line x1="2" y1="12" x2="22" y2="12"/>
                        <line x1="2" y1="7" x2="7" y2="7"/>
                        <line x1="2" y1="17" x2="7" y2="17"/>
                        <line x1="17" y1="7" x2="22" y2="7"/>
                        <line x1="17" y1="17" x2="22" y2="17"/>
                    </svg>
                    System Settings
                </h2>
            </div>
            <div class="panel-body">
                <div id="systemAlert" class="alert"></div>
                
                <h4>Hostname</h4>
                <p class="form-hint" style="margin-bottom: 16px;">The system hostname identifies this device on the network. Changes require a reboot for all services to recognize the new name.</p>
                
                <div class="config-row" style="display: flex; gap: 16px; align-items: flex-end;">
                    <div class="form-group" style="flex: 1; margin-bottom: 0;">
                        <label for="hostnameInput">Hostname</label>
                        <input type="text" id="hostnameInput" placeholder="e.g. rist-receiver-01" maxlength="63" pattern="^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$">
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-primary" onclick="saveHostname(false)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                                <polyline points="17 21 17 13 7 13 7 21"/>
                                <polyline points="7 3 7 8 15 8"/>
                            </svg>
                            Save
                        </button>
                        <button class="btn btn-secondary" onclick="saveHostname(true)" title="Save and reboot the system">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 4v6h-6M1 20v-6h6"/>
                                <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                            </svg>
                            Save &amp; Reboot
                        </button>
                    </div>
                </div>
            </div>
        </div>


        <!-- ADD THIS JAVASCRIPT TO THE SCRIPT SECTION -->

        // ==================== System Settings (Hostname) ====================

        function showSystemAlert(type, message) {
            const alert = document.getElementById('systemAlert');
            alert.className = `alert alert-${type} visible`;
            alert.textContent = message;
            if (type !== 'error') {
                setTimeout(() => alert.classList.remove('visible'), 5000);
            }
        }

        async function loadSystemHostname() {
            try {
                const response = await fetch(`${API_BASE}/system/hostname`, {
                    credentials: 'include'
                });
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('hostnameInput').value = data.hostname || '';
                }
            } catch (error) {
                console.error('Error loading hostname:', error);
            }
        }

        async function saveHostname(reboot = false) {
            const hostname = document.getElementById('hostnameInput').value.trim();
            
            if (!hostname) {
                showSystemAlert('error', 'Hostname cannot be empty');
                return;
            }
            
            // Validate hostname format
            if (!/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(hostname)) {
                showSystemAlert('error', 'Invalid hostname. Use only letters, numbers, and hyphens. Cannot start or end with a hyphen.');
                return;
            }
            
            if (hostname.length > 63) {
                showSystemAlert('error', 'Hostname must be 63 characters or less');
                return;
            }
            
            // Confirm if rebooting
            if (reboot) {
                if (!confirm(`Are you sure you want to change the hostname to "${hostname}" and reboot the system?`)) {
                    return;
                }
            }
            
            try {
                const response = await fetch(`${API_BASE}/system/hostname`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ hostname, reboot })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    if (data.rebooting) {
                        showSystemAlert('success', 'Hostname changed. System is rebooting... Please wait and refresh the page in a minute.');
                    } else {
                        showSystemAlert('success', data.message);
                        // Update the displayed hostname in the header
                        document.getElementById('siteName').textContent = hostname;
                        document.title = `Settings - RIST Manager // ${hostname}`;
                    }
                } else {
                    showSystemAlert('error', data.detail || 'Failed to change hostname');
                }
            } catch (error) {
                console.error('Error saving hostname:', error);
                showSystemAlert('error', 'Failed to save hostname: ' + error.message);
            }
        }

        // UPDATE THE DOMContentLoaded HANDLER TO INCLUDE loadSystemHostname():
        // Add loadSystemHostname(); after loadHostname(); in the initialization
